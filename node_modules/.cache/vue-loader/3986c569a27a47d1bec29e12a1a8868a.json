{"remainingRequest":"/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!/Users/songyu/IdeaProjects/yiqing-admin-1/src/views/Medicine/MedicineList.vue?vue&type=style&index=0&id=74998783&lang=less&scoped=true&","dependencies":[{"path":"/Users/songyu/IdeaProjects/yiqing-admin-1/src/views/Medicine/MedicineList.vue","mtime":1617512567795},{"path":"/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_vue-loader@15.9.8@vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmVsLWlucHV0LWdyb3VwIHsKICB3aWR0aDogNDAlOwp9Ci5oZWFkZXItbWVudSB7CiAgbWFyZ2luLWJvdHRvbTogNXB4OwogIHBhZGRpbmc6IDVweDsKICB0ZXh0LWFsaWduOiBsZWZ0OwogIG1hcmdpbi1ib3R0b206IDVweDsKfQoKLmZvb3Rlci1idXR0b24gewogIG1hcmdpbi10b3A6IDEwcHg7Cn0KCi5hZGRidG57CiAgbWFyZ2luLWxlZnQ6IDI1cHg7Cn0KCi5lbC10YWcgKyAuZWwtdGFnIHsKICBtYXJnaW4tbGVmdDogMTBweDsKfQouYnV0dG9uLW5ldy10YWcgewogIG1hcmdpbi1sZWZ0OiAxMHB4OwogIGhlaWdodDogMzJweDsKICBsaW5lLWhlaWdodDogMzBweDsKICBwYWRkaW5nLXRvcDogMDsKICBwYWRkaW5nLWJvdHRvbTogMDsKfQouaW5wdXQtbmV3LXRhZyB7CiAgd2lkdGg6IDkwcHg7CiAgbWFyZ2luLWxlZnQ6IDEwcHg7CiAgdmVydGljYWwtYWxpZ246IGJvdHRvbTsKfQo="},{"version":3,"sources":["MedicineList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MedicineList.vue","sourceRoot":"src/views/Medicine","sourcesContent":["<template>\n  <div>\n    <!-- 功能 -->\n    <div class=\"header-menu\">\n      <el-input placeholder=\"搜索药方\" v-model=\"keyword\" @clear=\"inputListener\" clearable>\n        <el-button slot=\"append\" type=\"primary\" icon=\"el-icon-search\" @click=\"searchStudent\">搜索</el-button>\n      </el-input>\n      <!--      <el-select v-model=\"value1\" placeholder=\"年级\" @change=\"queryClass\" @clear=\"gradeListener\" clearable>-->\n      <!--        <el-option v-for=\"item in grade\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\"></el-option>-->\n      <!--      </el-select>-->\n      <!--      <el-select v-model=\"value2\" placeholder=\"班级\" @change=\"queryStudentByClass\" @clear=\"classListener\" clearable>-->\n      <!--        <el-option-->\n      <!--          v-for=\"item in classNo\"-->\n      <!--          :key=\"item.value\"-->\n      <!--          :label=\"item.label\"-->\n      <!--          :value=\"item.value\"-->\n      <!--        ></el-option>-->\n      <!--      </el-select>-->\n      <el-button type=\"primary\" @click=\"addStudent()\" class=\"addbtn\">添加</el-button>\n    </div>\n    <!-- 数据显示 -->\n    <el-table :data=\"studentData\" size=\"mini\" :stripe=\"true\" :highlight-current-row=\"true\">\n      <el-table-column label=\"序号\" type=\"selection\"></el-table-column>\n      <!--       <el-table-column prop=\"id\" label=\"ID\"></el-table-column>-->\n      <!--      <el-table-column prop=\"studentNo\" label=\"学号\" fixed width=\"100\"></el-table-column>-->\n      <!--      <el-table-column prop=\"title\" label=\"标题\"></el-table-column>-->\n<!--      <el-table-column prop=\"code\" label=\"代码\" ></el-table-column>-->\n      <el-table-column prop=\"name\" label=\"药材名\" ></el-table-column>\n<!--      <el-table-column prop=\"origin\" label=\"来源\" ></el-table-column>-->\n      <el-table-column prop=\"benefit\" label=\"功效\" ></el-table-column>\n      <el-table-column prop=\"major\" label=\"主治\" ></el-table-column>\n      <el-table-column prop=\"place\" label=\"产地\" ></el-table-column>\n      <!--      <el-table-column prop=\"createTime\" label=\"提交时间\" ></el-table-column>-->\n      <!--      <el-table-column prop=\"updateTime\" label=\"处理时间\" ></el-table-column>-->\n      <!--      <el-table-column prop=\"star\" label=\"收藏数\" ></el-table-column>-->\n      <!--      <el-table-column prop=\"grade\" label=\"年级\" fixed width=\"100\"></el-table-column>-->\n      <!--      <el-table-column prop=\"classNo\" label=\"班级\" fixed width=\"100\"></el-table-column>-->\n      <!--      <el-table-column prop=\"author\" label=\"作者\" ></el-table-column>-->\n      <!--      <el-table-column prop=\"type\" label=\"类型\" >-->\n      <!--        <template slot-scope=\"scope\">-->\n      <!--          <el-tag v-if=\"scope.row.type==1\" plain >中医常识</el-tag>-->\n      <!--          <el-tag v-else-if=\"scope.row.type==2\" plain>中药常识</el-tag>-->\n      <!--          <el-tag v-else-if=\"scope.row.type==3\" plain>中药方剂</el-tag>-->\n      <!--          <el-tag v-else-if=\"scope.row.type==4\" plain>中药文化</el-tag>-->\n      <!--        </template>-->\n      <!--      </el-table-column>-->\n      <!--      <el-table-column prop=\"status\" label=\"处理状态\" >-->\n      <!--        <template slot-scope=\"scope\">-->\n      <!--          <el-tag v-if=\"scope.row.status==0\" plain >待处理</el-tag>-->\n      <!--          <el-tag v-else-if=\"scope.row.status==1\" type=\"success\" effect=\"dark\">已处理</el-tag>-->\n      <!--          <el-tag v-else-if=\"scope.row.status==2\" type=\"warning\" effect=\"dark\">忽略</el-tag>-->\n      <!--        </template>-->\n      <!--      </el-table-column>-->\n      <el-table-column prop=\"operation\" label=\"操作\" fixed=\"right\" width=\"180\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"primary\" icon=\"el-icon-edit\" circle @click=\"editById(scope.$index, scope.row)\"></el-button>\n          <!--          <el-button type=\"success\" icon=\"el-icon-check\" circle @click=\"statusById(scope.$index, scope.row, 1)\"></el-button>-->\n          <!--          <el-button type=\"warning\" icon=\"el-icon-close\" circle @click=\"statusById(scope.$index, scope.row, 2)\"></el-button>-->\n          <el-button icon=\"el-icon-delete\" circle @click=\"deleteById(scope.$index, scope.row)\"></el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 弹出表单编辑用户 -->\n    <el-dialog title=\"编辑药材\" :visible.sync=\"visibleForm\">\n      <el-form\n              :model=\"editFormData\"\n              label-position=\"left\"\n              label-width=\"80px\"\n      >\n        <el-form-item label=\"药材名\" prop=\"name\">\n          <el-input v-model=\"editFormData.name\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"产量\" prop=\"amount\">\n          <el-input v-model=\"editFormData.amount\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"功效\" prop=\"benefit\">\n          <el-input v-model=\"editFormData.benefit\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"主治\" prop=\"major\">\n          <el-input v-model=\"editFormData.major\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"类别\" prop=\"category\">\n                <el-select v-model=\"editFormData.category\" placeholder=\"类别\"  clearable>\n                  <el-option\n                    v-for=\"item in categories\"\n                    :key=\"item.value\"\n                    :label=\"item.label\"\n                    :value=\"item.value\"\n                  ></el-option>\n                </el-select>\n        </el-form-item>\n        <el-form-item label=\"产地\" prop=\"place\">\n          <el-tag\n                  :key=\"tag\"\n                  v-for=\"tag in dynamicTags\"\n                  closable\n                  :disable-transitions=\"false\"\n                  @close=\"handleClose(tag)\">\n            {{tag}}\n          </el-tag>\n          <el-input\n                  class=\"input-new-tag\"\n                  v-if=\"inputVisible\"\n                  v-model=\"inputValue\"\n                  ref=\"saveTagInput\"\n                  size=\"small\"\n                  @keyup.enter.native=\"handleInputConfirm\"\n                  @blur=\"handleInputConfirm\"\n          >\n          </el-input>\n          <el-button v-else class=\"button-new-tag\" size=\"small\" @click=\"showInput\">+ 添加产地 </el-button>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"visibleForm = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"commit()\">提 交</el-button>\n      </div>\n    </el-dialog>\n\n\n    <el-dialog title=\"添加药材\" :visible.sync=\"visibleAddForm\">\n      <el-form\n              :model=\"addFormdata\"\n              label-position=\"left\"\n              label-width=\"80px\"\n              :rules=\"editFormRules\"\n      >\n        <el-form-item label=\"药材名\" prop=\"name\">\n          <el-input v-model=\"addFormdata.name\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"产量\" prop=\"amount\">\n          <el-input type=\"number\" v-model=\"addFormdata.amount\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"功效\" prop=\"benefit\">\n          <el-input v-model=\"addFormdata.benefit\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"主治\" prop=\"major\">\n          <el-input v-model=\"addFormdata.major\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"类别\" prop=\"category\">\n          <el-select v-model=\"addFormdata.category\" placeholder=\"类别\"  clearable>\n            <el-option\n                    v-for=\"item in categories\"\n                    :key=\"item.value\"\n                    :label=\"item.label\"\n                    :value=\"item.value\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"产地\" prop=\"place\">\n          <!--          <el-input type=\"textarea\" v-model=\"addFormdata.remark\"></el-input>-->\n          <el-tag\n                  :key=\"tag\"\n                  v-for=\"tag in dynamicTags\"\n                  closable\n                  :disable-transitions=\"false\"\n                  @close=\"handleClose(tag)\">\n            {{tag}}\n          </el-tag>\n          <el-input\n                  class=\"input-new-tag\"\n                  v-if=\"inputVisible\"\n                  v-model=\"inputValue\"\n                  ref=\"saveTagInput\"\n                  size=\"small\"\n                  @keyup.enter.native=\"handleInputConfirm\"\n                  @blur=\"handleInputConfirm\"\n          >\n          </el-input>\n          <el-button v-else class=\"button-new-tag\" size=\"small\" @click=\"showInput\">+ 添加产地 </el-button>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"visibleAddForm = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"addCommit()\">提 交</el-button>\n      </div>\n    </el-dialog>\n\n    <!-- 上一页，当前页，下一页 -->\n    <div class=\"footer-button\">\n      <el-pagination\n              @size-change=\"handleSizeChange\"\n              @current-change=\"handleCurrentChange\"\n              :current-page.sync=\"page\"\n              :page-size=\"pageSize\"\n              layout=\"total, prev, pager, next\"\n              :total=\"total\"\n      ></el-pagination>\n    </div>\n  </div>\n</template>\n\n<script>\n  import {add,del,modify,get,search} from \"@/api/medicine\";\n\n  export default {\n    name: \"UserList\",\n    data() {\n      return {\n        dynamicTags:[],\n        inputVisible: false,\n        inputValue: '',\n        studentData: [],\n        editFormData: [],\n        addFormdata:{\n          name: \"\",\n          major: \"\",\n          benefit: \"\",\n          amount: 0,\n          place: \"\",\n          remark: \"\",\n          category: 0\n        },\n        visibleAddForm: false,\n        keyword: \"\",\n        page: 1,\n        pageSize: 10,\n        total: 0,\n        type: [\n          {\n            value: \"1\",\n            label: \"中医常识\"\n          },\n          {\n            value: \"2\",\n            label: \"中药常识\"\n          },\n          {\n            value: \"3\",\n            label: \"中药方剂\"\n          },\n          {\n            value: \"4\",\n            label: \"中药文化\"\n          }\n        ],\n        categories: [\n          {\n            value: 0,\n            label: \"解表药\"\n          },\n          {\n            value: 1,\n            label: \"祛风湿药\"\n          },\n          {\n            value: 2,\n            label: \"祛湿药\"\n          },\n          {\n            value: 3,\n            label: \"清热药\"\n          },\n          {\n            value: 4,\n            label: \"消导药\"\n          },\n          {\n            value: 5,\n            label: \"催吐药\"\n          },\n          {\n            value: 6,\n            label: \"泻下药\"\n          },\n          {\n            value: 7,\n            label: \"祛痰止咳平喘药\"\n          }\n        ],\n        visibleForm: false,\n        editFormRules: {\n          // username: [{ required: true, message: \"请输入昵称\", trigger: \"blur\" }],\n          // realname: [{ required: true, message: \"请输入姓名\", trigger: \"blur\" }],\n          // telephone: [{ required: true, message: \"请输入联系电话\", trigger: \"blur\" }],\n          // email: [{ required: true, message: \"请输入邮件\", trigger: \"blur\" }],\n          // address: [{ required: true, message: \"请输入地址\", trigger: \"blur\" }],\n        }\n      };\n    },\n\n    mounted() {\n      this.allStudent();\n    },\n\n    methods: {\n      statusFormatter(data){\n        if(data.status == '0'){\n          return '待审批'\n        }\n      },\n      addStudent() {\n        this.visibleAddForm = true;\n      },\n      addCommit() {\n        this.addFormdata.place = this.dynamicTags.join(',') /*把标签数据给表单*/\n        console.log(this.addFormdata);\n        console.log(this.dynamicTags.join(','));\n        add(this.addFormdata)\n          .then(res => {\n            if (res.code == 0) {\n              this.visibleAddForm = false;\n              this.$message({ message: \"添加成功\", type: \"success\" });\n              this.allStudent()\n            }\n          })\n          .catch(error => {\n            this.$message.error(\"添加失败\");\n          });\n      },\n\n      editById(index, row) {\n        let modifyId = row.id\n        this.editFormData = row\n        if(row.place.trim()!='')\n          this.dynamicTags = row.place.split(',')\n        this.visibleForm = true\n      },\n\n      modifyStudent(modifyData) {\n        modify(modifyData)\n          .then(res => {\n            this.$message({ message: \"更新成功\", type: \"success\" })\n            this.allStudent()\n            this.visibleForm = false\n          })\n          .catch(error => {\n            this.$message.error(\"更新失败\")\n          });\n      },\n\n      gradeListener() {\n        this.allStudent()\n        this.value2 = ''\n      },\n\n      // 清空班级回到查询所有班级\n      classListener() {\n\n      },\n\n      /***\n       * 编辑提交\n       */\n      commit() {\n        this.editFormData.place = this.dynamicTags.join(',')\n        this.modifyStudent(this.editFormData)\n      },\n\n      inputListener() {\n        this.allStudent()\n      },\n\n      /**\n       * 查询所有\n       */\n      allStudent() {\n        console.log(this.page)\n        get(this.page).then(res => {\n          let ret = res.data\n          this.studentData = ret.records\n          this.total = ret.total\n        })\n          .catch(error => {\n            this.$message.error(\"查询列表失败\")\n          });\n      },\n\n      /**\n       * 关键字查询\n       */\n      searchStudent() {\n        search(this.keyword)\n          .then(res => {\n            let ret = res.data\n            this.studentData = ret.records\n            this.total = ret.total\n            this.$message({ message: \"查询成功\", type: \"success\" })\n          })\n          .catch(error => {\n            this.$message.error(\"查询失败\")\n          });\n      },\n\n      resetById(index, row) {\n        this.resetPassword(row.id);\n      },\n\n      resetPassword(id){\n        modify({\"id\":id,\"password\":\"123456\"})\n          .then(res => {\n            this.$message({ message: \"重置密码成功\", type: \"success\" });\n          })\n          .catch(error => {\n            this.$message.error(\"重置密码失败\");\n          });\n      },\n\n      deleteById(index, row) {\n        this.deleteRequestById(row.id)\n      },\n\n      deleteRequestById(id) {\n        del(id).then(res => {\n          this.$message({ message: \"删除成功\", type: \"success\" })\n          this.allStudent()\n        }).catch(error => {\n          this.$message.error(\"删除失败\")\n        });\n      },\n\n      /*审核状态*/\n      statusById(index, row, status) {\n        this.statusRequestById(row.id, status)\n      },\n\n      statusRequestById(id, status) {\n        modify({\"id\":id,\"status\": status}).then(res => {\n          this.$message({ message: \"处理成功\", type: \"success\" })\n          this.allStudent()\n        }).catch(error => {\n          this.$message.error(\"处理失败\")\n        });\n      },\n\n      handleSizeChange() {},\n\n      handleCurrentChange(v) {\n        this.page = v\n        this.allStudent()\n      },\n      handleClose(tag) {\n        this.dynamicTags.splice(this.dynamicTags.indexOf(tag), 1);\n      },\n\n      showInput() {\n        this.inputVisible = true;\n        this.$nextTick(_ => {\n          this.$refs.saveTagInput.$refs.input.focus();\n        });\n      },\n\n      handleInputConfirm() {\n        let inputValue = this.inputValue;\n        if (inputValue) {\n          this.dynamicTags.push(inputValue);\n        }\n        this.inputVisible = false;\n        this.inputValue = '';\n      }\n    }\n  };\n</script>\n\n<style lang=\"less\" scoped>\n  .el-input-group {\n    width: 40%;\n  }\n  .header-menu {\n    margin-bottom: 5px;\n    padding: 5px;\n    text-align: left;\n    margin-bottom: 5px;\n  }\n\n  .footer-button {\n    margin-top: 10px;\n  }\n\n  .addbtn{\n    margin-left: 25px;\n  }\n\n  .el-tag + .el-tag {\n    margin-left: 10px;\n  }\n  .button-new-tag {\n    margin-left: 10px;\n    height: 32px;\n    line-height: 30px;\n    padding-top: 0;\n    padding-bottom: 0;\n  }\n  .input-new-tag {\n    width: 90px;\n    margin-left: 10px;\n    vertical-align: bottom;\n  }\n</style>\n"]}]}