{"remainingRequest":"/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!/Users/songyu/IdeaProjects/yiqing-admin-1/src/views/dashboard/admin/components/Graph.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/songyu/IdeaProjects/yiqing-admin-1/src/views/dashboard/admin/components/Graph.vue","mtime":1618551052428},{"path":"/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KCmltcG9ydCAgKiBhcyBlY2hhcnRzIGZyb20gImVjaGFydHMiCmltcG9ydCByZXNpemUgZnJvbSAnLi9taXhpbnMvcmVzaXplJwppbXBvcnQge2dldERhc2hEYXRhLCBnZXRHcmFwaERhdGF9IGZyb20gIkAvYXBpL2Rhc2giOwppbXBvcnQge3JlbGF0aW9uR3JhcGh9IGZyb20gIkAvYXBpL2NoYXJ0IjsKCmNvbnN0IGFuaW1hdGlvbkR1cmF0aW9uID0gNjAwMAoKZXhwb3J0IGRlZmF1bHQgewogIG1peGluczogW3Jlc2l6ZV0sCiAgcHJvcHM6IHsKICAgIGNsYXNzTmFtZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdjaGFydCcKICAgIH0sCiAgICB3aWR0aDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcxMDAlJwogICAgfSwKICAgIGhlaWdodDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICc2NTBweCcKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjaGFydDogbnVsbCwKICAgICAgZ3JhcGg6IG51bGwKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgIHJlbGF0aW9uR3JhcGgoKS50aGVuKHJlcz0+ewogICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKQogICAgICAgIHRoaXMuZ3JhcGggPSByZXMuZGF0YQogICAgICAgIHRoaXMuaW5pdENoYXJ0KCkKICAgICAgfSkuY2F0Y2goZXJyb3I9PnsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgfSkKICAgIH0pCiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgaWYgKCF0aGlzLmNoYXJ0KSB7CiAgICAgIHJldHVybgogICAgfQogICAgdGhpcy5jaGFydC5kaXNwb3NlKCkKICAgIHRoaXMuY2hhcnQgPSBudWxsCiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0Q2hhcnQoKSB7CiAgICAgIC8vIHRoaXMuY2hhcnQgPSBlY2hhcnRzLmluaXQodGhpcy4kZWwsICdtYWNhcm9ucycpCiAgICAgIHRoaXMuY2hhcnQgPSBlY2hhcnRzLmluaXQodGhpcy4kZWwsJ2RhcmsnKQoKICAgICAgbGV0IGdyYXBoID0gdGhpcy5ncmFwaDsKICAgICAgLy8gY29uc29sZS5sb2coZ3JhcGgpCiAgICAgIHRoaXMuY2hhcnQuc2V0T3B0aW9uKAogICAgICAgICB7CiAgICAgICAgICB0aXRsZTogewogICAgICAgICAgICB0ZXh0OiAnSVDotYTkuqflhbPns7vlm77osLEnLAogICAgICAgICAgICBzdWJ0ZXh0OiAnRGVmYXVsdCBsYXlvdXQnLAogICAgICAgICAgICB0b3A6ICdib3R0b20nLAogICAgICAgICAgICBsZWZ0OiAncmlnaHQnCiAgICAgICAgICB9LAogICAgICAgICAgdG9vbHRpcDoge30sCiAgICAgICAgICBkYXJrTW9kZTogdHJ1ZSwKICAgICAgICAgIGxlZ2VuZDogW3sKICAgICAgICAgICAgLy8gc2VsZWN0ZWRNb2RlOiAnc2luZ2xlJywKICAgICAgICAgICAgZGF0YTogZ3JhcGguY2F0ZWdvcmllcy5tYXAoZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICByZXR1cm4gYS5uYW1lOwogICAgICAgICAgICB9KQogICAgICAgICAgfV0sCiAgICAgICAgICBhbmltYXRpb25EdXJhdGlvbjogMzAwMCwKICAgICAgICAgIGFuaW1hdGlvbkVhc2luZ1VwZGF0ZTogJ3F1aW50aWNJbk91dCcsCiAgICAgICAgICBzZXJpZXM6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgIG5hbWU6ICfkuK3oja/mnZDlhbPns7vlm77osLEnLAogICAgICAgICAgICAgIHR5cGU6ICdncmFwaCcsCiAgICAgICAgICAgICAgbGF5b3V0OiAnbm9uZScsCiAgICAgICAgICAgICAgZGF0YTogZ3JhcGgubm9kZXMsCiAgICAgICAgICAgICAgbGlua3M6IGdyYXBoLmxpbmtzLAogICAgICAgICAgICAgIGNhdGVnb3JpZXM6IGdyYXBoLmNhdGVnb3JpZXMsCiAgICAgICAgICAgICAgcm9hbTogdHJ1ZSwKICAgICAgICAgICAgICBsYWJlbDogewogICAgICAgICAgICAgICAgcG9zaXRpb246ICdyaWdodCcsCiAgICAgICAgICAgICAgICBmb3JtYXR0ZXI6ICd7Yn0nCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBsaW5lU3R5bGU6IHsKICAgICAgICAgICAgICAgIGNvbG9yOiAnc291cmNlJywKICAgICAgICAgICAgICAgIGN1cnZlbmVzczogMC4zCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBlbXBoYXNpczogewogICAgICAgICAgICAgICAgZm9jdXM6ICdhZGphY2VuY3knLAogICAgICAgICAgICAgICAgbGluZVN0eWxlOiB7CiAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgXQogICAgICAgIH0KICAgICAgKQogICAgfQogIH0KfQo="},{"version":3,"sources":["Graph.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Graph.vue","sourceRoot":"src/views/dashboard/admin/components","sourcesContent":["<template>\n  <div :class=\"className\" :style=\"{height:height,width:width}\" />\n</template>\n\n<script>\nimport  * as echarts from \"echarts\"\nimport resize from './mixins/resize'\nimport {getDashData, getGraphData} from \"@/api/dash\";\nimport {relationGraph} from \"@/api/chart\";\n\nconst animationDuration = 6000\n\nexport default {\n  mixins: [resize],\n  props: {\n    className: {\n      type: String,\n      default: 'chart'\n    },\n    width: {\n      type: String,\n      default: '100%'\n    },\n    height: {\n      type: String,\n      default: '650px'\n    }\n  },\n  data() {\n    return {\n      chart: null,\n      graph: null\n    }\n  },\n  mounted() {\n    this.$nextTick(() => {\n      relationGraph().then(res=>{\n        console.log(res.data)\n        this.graph = res.data\n        this.initChart()\n      }).catch(error=>{\n        console.log(error)\n      })\n    })\n  },\n  beforeDestroy() {\n    if (!this.chart) {\n      return\n    }\n    this.chart.dispose()\n    this.chart = null\n  },\n  methods: {\n    initChart() {\n      // this.chart = echarts.init(this.$el, 'macarons')\n      this.chart = echarts.init(this.$el,'dark')\n\n      let graph = this.graph;\n      // console.log(graph)\n      this.chart.setOption(\n         {\n          title: {\n            text: 'IP资产关系图谱',\n            subtext: 'Default layout',\n            top: 'bottom',\n            left: 'right'\n          },\n          tooltip: {},\n          darkMode: true,\n          legend: [{\n            // selectedMode: 'single',\n            data: graph.categories.map(function (a) {\n              return a.name;\n            })\n          }],\n          animationDuration: 3000,\n          animationEasingUpdate: 'quinticInOut',\n          series: [\n            {\n              name: '中药材关系图谱',\n              type: 'graph',\n              layout: 'none',\n              data: graph.nodes,\n              links: graph.links,\n              categories: graph.categories,\n              roam: true,\n              label: {\n                position: 'right',\n                formatter: '{b}'\n              },\n              lineStyle: {\n                color: 'source',\n                curveness: 0.3\n              },\n              emphasis: {\n                focus: 'adjacency',\n                lineStyle: {\n                  width: 10\n                }\n              }\n            }\n          ]\n        }\n      )\n    }\n  }\n}\n</script>\n"]}]}