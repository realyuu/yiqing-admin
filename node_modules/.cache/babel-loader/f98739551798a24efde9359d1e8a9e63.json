{"remainingRequest":"/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!/Users/songyu/IdeaProjects/yiqing-admin-1/src/views/Permission/Role.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/songyu/IdeaProjects/yiqing-admin-1/src/views/Permission/Role.vue","mtime":1619502198161},{"path":"/Users/songyu/IdeaProjects/yiqing-admin-1/babel.config.js","mtime":1609384492193},{"path":"/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3Nvbmd5dS9JZGVhUHJvamVjdHMveWlxaW5nLWFkbWluLTEvbm9kZV9tb2R1bGVzL19AYmFiZWxfcnVudGltZUA3LjE3LjJAQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiL1VzZXJzL3Nvbmd5dS9JZGVhUHJvamVjdHMveWlxaW5nLWFkbWluLTEvbm9kZV9tb2R1bGVzL19AYmFiZWxfcnVudGltZUA3LjE3LjJAQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkuanMiOwppbXBvcnQgX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIgZnJvbSAiL1VzZXJzL3Nvbmd5dS9JZGVhUHJvamVjdHMveWlxaW5nLWFkbWluLTEvbm9kZV9tb2R1bGVzL19AYmFiZWxfcnVudGltZUA3LjE3LjJAQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlci5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvc29uZ3l1L0lkZWFQcm9qZWN0cy95aXFpbmctYWRtaW4tMS9ub2RlX21vZHVsZXMvX0BiYWJlbF9ydW50aW1lQDcuMTcuMkBAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnOwppbXBvcnQgeyBkZWVwQ2xvbmUgfSBmcm9tICdAL3V0aWxzJzsKaW1wb3J0IHsgZ2V0Um91dGVzLCBnZXRSb2xlcyBhcyBfZ2V0Um9sZXMsIGFkZFJvbGUsIGRlbGV0ZVJvbGUgfSBmcm9tICdAL2FwaS9yb2xlJzsKaW1wb3J0IHsgY29uc3RhbnRSb3V0ZXMsIGFzeW5jUm91dGVzIH0gZnJvbSAiQC9yb3V0ZXIiOwppbXBvcnQgeyBnZXRNZW51cyB9IGZyb20gIkAvYXBpL21lbnUiOwppbXBvcnQgeyB1cGRhdGVSb2xlIH0gZnJvbSAiQC9hcGkvcm9sZSI7CnZhciBkZWZhdWx0Um9sZSA9IHsKICBrZXk6ICcnLAogIG5hbWU6ICcnLAogIGRlc2NyaXB0aW9uOiAnJywKICByb3V0ZXM6IFtdCn07CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcm9sZTogT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdFJvbGUpLAogICAgICByb3V0ZXM6IFtdLAogICAgICByb2xlc0xpc3Q6IFtdLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZGlhbG9nVHlwZTogJ25ldycsCiAgICAgIGNoZWNrU3RyaWN0bHk6IGZhbHNlLAogICAgICBkZWZhdWx0UHJvcHM6IHsKICAgICAgICBjaGlsZHJlbjogJ2NoaWxkcmVuJywKICAgICAgICBsYWJlbDogJ3RpdGxlJwogICAgICB9CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHJvdXRlc0RhdGE6IGZ1bmN0aW9uIHJvdXRlc0RhdGEoKSB7CiAgICAgIHJldHVybiB0aGlzLnJvdXRlczsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICAvLyBNb2NrOiBnZXQgYWxsIHJvdXRlcyBhbmQgcm9sZXMgbGlzdCBmcm9tIHNlcnZlcgogICAgLy8gdGhpcy5yb3V0ZXMgPSBkZWVwQ2xvbmUoWy4uLmNvbnN0YW50Um91dGVzLCAuLi5hc3luY1JvdXRlc10pCiAgICAvLyB0aGlzLnJvdXRlcyA9IHRoaXMuZ2VuZXJhdGVSb3V0ZXModGhpcy5yb3V0ZXMpCiAgICB0aGlzLmdldFJvdXRlcygpOwogICAgdGhpcy5nZXRSb2xlcygpOyAvLyBjb25zb2xlLmxvZygidGhpcy5yb3V0ZXMiLCB0aGlzLnNlcnZpY2VSb3V0ZXMpCiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRSb3V0ZXM6IGZ1bmN0aW9uIGdldFJvdXRlcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRNZW51cyhfdGhpcy4kc3RvcmUuc3RhdGUudXNlci5yb2xlc1swXSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICAvL+i/meS4quaYr+WQpuWvue+8nwogICAgICAgICAgICAgICAgX3RoaXMuc2VydmljZVJvdXRlcyA9IHJlcy5kYXRhOwogICAgICAgICAgICAgICAgX3RoaXMucm91dGVzID0gX3RoaXMuZ2VuZXJhdGVSb3V0ZXMocmVzLmRhdGEpOyAvL2ZvciB0cmVlCgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JvdXRlcycsIF90aGlzLnJvdXRlcyk7IC8vIHRoaXMuc2VydmljZVJvdXRlcyA9IHRoaXMuZ2VuZXJhdGVSb3V0ZXMocmVzLmRhdGEpICAvL+S7heaYr+a1i+ivlQogICAgICAgICAgICAgICAgLy8gdGhpcy5yb2xlLnJvdXRlcyA9IHRoaXMuZ2VuZXJhdGVSb3V0ZXMocmVzLmRhdGEpICAvL+S7heaYr+a1i+ivlQoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZ2V0Um9sZXM6IGZ1bmN0aW9uIGdldFJvbGVzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBfZ2V0Um9sZXMoKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZ2V0Um9sZXMnLCByZXMpCiAgICAgICAgICAgICAgICBfdGhpczIucm9sZXNMaXN0ID0gcmVzLmRhdGE7IC8vIHRoaXMuc2VydmljZVJvdXRlcyA9IHRoaXMuZ2VuZXJhdGVSb3V0ZXMocmVzLmRhdGEpCgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIFJlc2hhcGUgdGhlIHJvdXRlcyBzdHJ1Y3R1cmUgc28gdGhhdCBpdCBsb29rcyB0aGUgc2FtZSBhcyB0aGUgc2lkZWJhcgogICAgZ2VuZXJhdGVSb3V0ZXM6IGZ1bmN0aW9uIGdlbmVyYXRlUm91dGVzKHJvdXRlcykgewogICAgICB2YXIgYmFzZVBhdGggPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICcvJzsKICAgICAgdmFyIHJlcyA9IFtdOwoKICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHJvdXRlcyksCiAgICAgICAgICBfc3RlcDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciByb3V0ZSA9IF9zdGVwLnZhbHVlOwoKICAgICAgICAgIC8vIHNraXAgc29tZSByb3V0ZQogICAgICAgICAgLy8gY29uc29sZS5sb2coJ3JvdXRlMCcsIHJvdXRlKQogICAgICAgICAgaWYgKHJvdXRlLmhpZGRlbikgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgb25seU9uZVNob3dpbmdDaGlsZCA9IHRoaXMub25seU9uZVNob3dpbmdDaGlsZChyb3V0ZS5jaGlsZHJlbiwgcm91dGUpOwoKICAgICAgICAgIGlmIChyb3V0ZS5jaGlsZHJlbiAmJiBvbmx5T25lU2hvd2luZ0NoaWxkICYmICFyb3V0ZS5hbHdheXNTaG93KSB7CiAgICAgICAgICAgIHJvdXRlID0gb25seU9uZVNob3dpbmdDaGlsZDsKICAgICAgICAgIH0gLy8gY29uc29sZS5sb2coJ3JvdXRlJywgcm91dGUpCgoKICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICBwYXRoOiBwYXRoLnJlc29sdmUoYmFzZVBhdGgsIHJvdXRlLnBhdGgpLAogICAgICAgICAgICB0aXRsZTogcm91dGUubWV0YSAmJiByb3V0ZS5tZXRhLnRpdGxlLAogICAgICAgICAgICBpZDogcm91dGUuaWQKICAgICAgICAgIH07IC8vIGNvbnNvbGUubG9nKCdkYXRhJywgZGF0YSkKICAgICAgICAgIC8vIHJlY3Vyc2l2ZSBjaGlsZCByb3V0ZXMKCiAgICAgICAgICBpZiAocm91dGUuY2hpbGRyZW4pIHsKICAgICAgICAgICAgZGF0YS5jaGlsZHJlbiA9IHRoaXMuZ2VuZXJhdGVSb3V0ZXMocm91dGUuY2hpbGRyZW4sIGRhdGEucGF0aCk7CiAgICAgICAgICB9CgogICAgICAgICAgcmVzLnB1c2goZGF0YSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXM7CiAgICB9LAogICAgZ2VuZXJhdGVBcnI6IGZ1bmN0aW9uIGdlbmVyYXRlQXJyKHJvdXRlcykgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBkYXRhID0gW107CiAgICAgIHJvdXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChyb3V0ZSkgewogICAgICAgIGRhdGEucHVzaChyb3V0ZSk7CgogICAgICAgIGlmIChyb3V0ZS5jaGlsZHJlbikgewogICAgICAgICAgdmFyIHRlbXAgPSBfdGhpczMuZ2VuZXJhdGVBcnIocm91dGUuY2hpbGRyZW4pOwoKICAgICAgICAgIGlmICh0ZW1wLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgZGF0YSA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoZGF0YSksIF90b0NvbnN1bWFibGVBcnJheSh0ZW1wKSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIGRhdGE7CiAgICB9LAogICAgaGFuZGxlQWRkUm9sZTogZnVuY3Rpb24gaGFuZGxlQWRkUm9sZSgpIHsKICAgICAgdGhpcy5yb2xlID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdFJvbGUpOwoKICAgICAgaWYgKHRoaXMuJHJlZnMudHJlZSkgewogICAgICAgIHRoaXMuJHJlZnMudHJlZS5zZXRDaGVja2VkTm9kZXMoW10pOwogICAgICB9CgogICAgICB0aGlzLmRpYWxvZ1R5cGUgPSAnbmV3JzsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBoYW5kbGVFZGl0OiBmdW5jdGlvbiBoYW5kbGVFZGl0KHNjb3BlKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdGhpcy5kaWFsb2dUeXBlID0gJ2VkaXQnOwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgICB0aGlzLmNoZWNrU3RyaWN0bHkgPSB0cnVlOwogICAgICB0aGlzLnJvbGUgPSBkZWVwQ2xvbmUoc2NvcGUucm93KTsKICAgICAgY29uc29sZS5sb2coJ3JvbGUnLCB0aGlzLnJvbGUpOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgLy9jb25zdCByb3V0ZXMgPSB0aGlzLmdlbmVyYXRlUm91dGVzKHRoaXMucm9sZS5yb3V0ZXMgPT0gbnVsbCA/IFtdIDogdGhpcy5yb2xlLnJvdXRlcykKICAgICAgICB2YXIgZCA9IF90aGlzNC5nZW5lcmF0ZUFycihfdGhpczQucm9sZS5yb3V0ZXMpOwoKICAgICAgICBjb25zb2xlLmxvZygnZCcsIGQpOwogICAgICAgIGNvbnNvbGUubG9nKCdyb3V0ZXNEYXRhJywgX3RoaXM0LnJvdXRlc0RhdGEpOyAvL+i/meS4quaciWJ1ZwoKICAgICAgICBfdGhpczQuJHJlZnMudHJlZS5zZXRDaGVja2VkTm9kZXMoZCk7IC8vIHNldCBjaGVja2VkIHN0YXRlIG9mIGEgbm9kZSBub3QgYWZmZWN0cyBpdHMgZmF0aGVyIGFuZCBjaGlsZCBub2RlcwoKCiAgICAgICAgX3RoaXM0LmNoZWNrU3RyaWN0bHkgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlRGVsZXRlOiBmdW5jdGlvbiBoYW5kbGVEZWxldGUoX3JlZikgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHZhciAkaW5kZXggPSBfcmVmLiRpbmRleCwKICAgICAgICAgIHJvdyA9IF9yZWYucm93OwogICAgICB0aGlzLiRjb25maXJtKCdDb25maXJtIHRvIHJlbW92ZSB0aGUgcm9sZT8nLCAnV2FybmluZycsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ0NvbmZpcm0nLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICdDYW5jZWwnLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZVJvbGUocm93LmtleSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF90aGlzNS5yb2xlc0xpc3Quc3BsaWNlKCRpbmRleCwgMSk7CgogICAgICAgICAgICAgICAgX3RoaXM1LiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRGVsZXRlIHN1Y2NlZCEnCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICBnZW5lcmF0ZVRyZWU6IGZ1bmN0aW9uIGdlbmVyYXRlVHJlZShyb3V0ZXMpIHsKICAgICAgdmFyIGJhc2VQYXRoID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnLyc7CiAgICAgIHZhciBjaGVja2VkS2V5cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkOwogICAgICB2YXIgcmVzID0gW107CgogICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHJvdXRlcyksCiAgICAgICAgICBfc3RlcDI7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgcm91dGUgPSBfc3RlcDIudmFsdWU7CiAgICAgICAgICB2YXIgcm91dGVQYXRoID0gcGF0aC5yZXNvbHZlKGJhc2VQYXRoLCByb3V0ZS5wYXRoKTsgLy8gcmVjdXJzaXZlIGNoaWxkIHJvdXRlcwoKICAgICAgICAgIGlmIChyb3V0ZS5jaGlsZHJlbikgewogICAgICAgICAgICByb3V0ZS5jaGlsZHJlbiA9IHRoaXMuZ2VuZXJhdGVUcmVlKHJvdXRlLmNoaWxkcmVuLCByb3V0ZVBhdGgsIGNoZWNrZWRLZXlzKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoY2hlY2tlZEtleXMuaW5jbHVkZXMocm91dGVQYXRoKSB8fCByb3V0ZS5jaGlsZHJlbiAmJiByb3V0ZS5jaGlsZHJlbi5sZW5ndGggPj0gMSkgewogICAgICAgICAgICByZXMucHVzaChyb3V0ZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IyLmYoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlczsKICAgIH0sCiAgICBjb25maXJtUm9sZTogZnVuY3Rpb24gY29uZmlybVJvbGUoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgdmFyIGlzRWRpdCwgY2hlY2tlZEtleXMsIGluZGV4LCBfeWllbGQkYWRkUm9sZSwgZGF0YSwgX3RoaXM2JHJvbGUsIGRlc2NyaXB0aW9uLCBrZXksIG5hbWU7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpc0VkaXQgPSBfdGhpczYuZGlhbG9nVHlwZSA9PT0gJ2VkaXQnOwogICAgICAgICAgICAgICAgY2hlY2tlZEtleXMgPSBfdGhpczYuJHJlZnMudHJlZS5nZXRDaGVja2VkS2V5cygpOwogICAgICAgICAgICAgICAgX3RoaXM2LnJvbGUucm91dGVzID0gX3RoaXM2LmdlbmVyYXRlVHJlZShkZWVwQ2xvbmUoX3RoaXM2LnNlcnZpY2VSb3V0ZXMpLCAnLycsIGNoZWNrZWRLZXlzKTsKCiAgICAgICAgICAgICAgICBpZiAoIWlzRWRpdCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlUm9sZShfdGhpczYucm9sZSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIGluZGV4ID0gMDsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgaWYgKCEoaW5kZXggPCBfdGhpczYucm9sZXNMaXN0Lmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXM2LnJvbGVzTGlzdFtpbmRleF0ua2V5ID09PSBfdGhpczYucm9sZS5rZXkpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzNi5yb2xlc0xpc3Quc3BsaWNlKGluZGV4LCAxLCBPYmplY3QuYXNzaWduKHt9LCBfdGhpczYucm9sZSkpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJicmVhayIsIDE0KTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIGluZGV4Kys7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICByZXR1cm4gYWRkUm9sZShfdGhpczYucm9sZSk7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICBfeWllbGQkYWRkUm9sZSA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgICAgZGF0YSA9IF95aWVsZCRhZGRSb2xlLmRhdGE7CiAgICAgICAgICAgICAgICBfdGhpczYucm9sZS5rZXkgPSBkYXRhLmtleTsKCiAgICAgICAgICAgICAgICBfdGhpczYucm9sZXNMaXN0LnB1c2goX3RoaXM2LnJvbGUpOwoKICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgICAgX3RoaXM2JHJvbGUgPSBfdGhpczYucm9sZSwgZGVzY3JpcHRpb24gPSBfdGhpczYkcm9sZS5kZXNjcmlwdGlvbiwga2V5ID0gX3RoaXM2JHJvbGUua2V5LCBuYW1lID0gX3RoaXM2JHJvbGUubmFtZTsKICAgICAgICAgICAgICAgIF90aGlzNi5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CgogICAgICAgICAgICAgICAgX3RoaXM2LiRub3RpZnkoewogICAgICAgICAgICAgICAgICB0aXRsZTogJ1N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICBkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6IHRydWUsCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICJcbiAgICAgICAgICAgIDxkaXY+Um9sZSBLZXk6ICIuY29uY2F0KGtleSwgIjwvZGl2PlxuICAgICAgICAgICAgPGRpdj5Sb2xlIE5hbWU6ICIpLmNvbmNhdChuYW1lLCAiPC9kaXY+XG4gICAgICAgICAgICA8ZGl2PkRlc2NyaXB0aW9uOiAiKS5jb25jYXQoZGVzY3JpcHRpb24sICI8L2Rpdj5cbiAgICAgICAgICAiKSwKICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIHJlZmVyZW5jZTogc3JjL3ZpZXcvbGF5b3V0L2NvbXBvbmVudHMvU2lkZWJhci9TaWRlYmFySXRlbS52dWUKICAgIG9ubHlPbmVTaG93aW5nQ2hpbGQ6IGZ1bmN0aW9uIG9ubHlPbmVTaG93aW5nQ2hpbGQoKSB7CiAgICAgIHZhciBjaGlsZHJlbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogW107CiAgICAgIHZhciBwYXJlbnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDsKICAgICAgdmFyIG9ubHlPbmVDaGlsZCA9IG51bGw7CiAgICAgIHZhciBzaG93aW5nQ2hpbGRyZW4gPSBjaGlsZHJlbi5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gIWl0ZW0uaGlkZGVuOwogICAgICB9KTsgLy8gV2hlbiB0aGVyZSBpcyBvbmx5IG9uZSBjaGlsZCByb3V0ZSwgdGhlIGNoaWxkIHJvdXRlIGlzIGRpc3BsYXllZCBieSBkZWZhdWx0CgogICAgICBpZiAoc2hvd2luZ0NoaWxkcmVuLmxlbmd0aCA9PT0gMSkgewogICAgICAgIG9ubHlPbmVDaGlsZCA9IHNob3dpbmdDaGlsZHJlblswXTsKICAgICAgICBvbmx5T25lQ2hpbGQucGF0aCA9IHBhdGgucmVzb2x2ZShwYXJlbnQucGF0aCwgb25seU9uZUNoaWxkLnBhdGgpOwogICAgICAgIHJldHVybiBvbmx5T25lQ2hpbGQ7CiAgICAgIH0gLy8gU2hvdyBwYXJlbnQgaWYgdGhlcmUgYXJlIG5vIGNoaWxkIHJvdXRlIHRvIGRpc3BsYXkKCgogICAgICBpZiAoc2hvd2luZ0NoaWxkcmVuLmxlbmd0aCA9PT0gMCkgewogICAgICAgIG9ubHlPbmVDaGlsZCA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcGFyZW50KSwge30sIHsKICAgICAgICAgIHBhdGg6ICcnLAogICAgICAgICAgbm9TaG93aW5nQ2hpbGRyZW46IHRydWUKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gb25seU9uZUNoaWxkOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":"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","names":["key","name","description","routes","data","role","rolesList","dialogVisible","dialogType","checkStrictly","defaultProps","children","label","computed","routesData","created","methods","getRoutes","getMenus","res","console","getRoles","generateRoutes","route","path","title","id","generateArr","handleAddRole","handleEdit","scope","handleDelete","confirmButtonText","cancelButtonText","type","then","deleteRole","message","catch","generateTree","confirmRole","isEdit","checkedKeys","updateRole","index","addRole","dangerouslyUseHTMLString","onlyOneShowingChild","onlyOneChild","noShowingChildren"],"sourceRoot":"src/views/Permission","sources":["Role.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n<!--    <el-button type=\"primary\" @click=\"handleAddRole\">New Role</el-button>-->\n\n    <el-table :data=\"rolesList\" style=\"width: 100%;margin-top:30px;\" border>\n      <el-table-column align=\"center\" label=\"权限英文名\" width=\"220\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.key }}\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" label=\"权限名\" width=\"220\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.name }}\n        </template>\n      </el-table-column>\n      <el-table-column align=\"header-center\" label=\"描述\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.description }}\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"primary\" size=\"small\" @click=\"handleEdit(scope)\">编辑</el-button>\n          <el-button type=\"danger\" disabled size=\"small\" @click=\"handleDelete(scope)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <el-dialog :visible.sync=\"dialogVisible\" :title=\"dialogType==='edit'?'编辑 角色':'新增 角色'\">\n      <el-form :model=\"role\" label-width=\"80px\" label-position=\"left\">\n        <el-form-item label=\"名称\">\n          <el-input v-model=\"role.name\" placeholder=\"Role Name\" />\n        </el-form-item>\n        <el-form-item label=\"描述\">\n          <el-input\n            v-model=\"role.description\"\n            :autosize=\"{ minRows: 2, maxRows: 4}\"\n            type=\"textarea\"\n            placeholder=\"Role Description\"\n          />\n        </el-form-item>\n        <el-form-item label=\"菜单\">\n          <el-tree\n            ref=\"tree\"\n            :check-strictly=\"checkStrictly\"\n            :data=\"routesData\"\n            :props=\"defaultProps\"\n            show-checkbox\n            node-key=\"path\"\n            class=\"permission-tree\"\n          />\n        </el-form-item>\n      </el-form>\n      <div style=\"text-align:right;\">\n        <el-button type=\"danger\" @click=\"dialogVisible=false\">Cancel</el-button>\n        <el-button type=\"primary\" @click=\"confirmRole\">Confirm</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport path from 'path'\nimport { deepClone } from '@/utils'\nimport { getRoutes, getRoles, addRole, deleteRole } from '@/api/role'\nimport {constantRoutes, asyncRoutes} from \"@/router\";\nimport {getMenus} from \"@/api/menu\";\nimport {updateRole} from \"@/api/role\";\n\nconst defaultRole = {\n  key: '',\n  name: '',\n  description: '',\n  routes: []\n}\n\nexport default {\n  data() {\n    return {\n      role: Object.assign({}, defaultRole),\n      routes: [],\n      rolesList: [],\n      dialogVisible: false,\n      dialogType: 'new',\n      checkStrictly: false,\n      defaultProps: {\n        children: 'children',\n        label: 'title'\n      }\n    }\n  },\n  computed: {\n    routesData() {\n      return this.routes\n    }\n  },\n  created() {\n    // Mock: get all routes and roles list from server\n    // this.routes = deepClone([...constantRoutes, ...asyncRoutes])\n    // this.routes = this.generateRoutes(this.routes)\n    this.getRoutes()\n    this.getRoles()\n    // console.log(\"this.routes\", this.serviceRoutes)\n  },\n  methods: {\n    async getRoutes() {\n      const res = await getMenus(this.$store.state.user.roles[0])  //这个是否对？\n      this.serviceRoutes = res.data\n      this.routes = this.generateRoutes(res.data)  //for tree\n      console.log('routes', this.routes)\n      // this.serviceRoutes = this.generateRoutes(res.data)  //仅是测试\n      // this.role.routes = this.generateRoutes(res.data)  //仅是测试\n    },\n\n    async getRoles() {\n      const res = await getRoles()\n      // console.log('getRoles', res)\n      this.rolesList = res.data\n      // this.serviceRoutes = this.generateRoutes(res.data)\n    },\n\n    // Reshape the routes structure so that it looks the same as the sidebar\n    generateRoutes(routes, basePath = '/') {\n      const res = []\n      for (let route of routes) {\n        // skip some route\n        // console.log('route0', route)\n        if (route.hidden) { continue }\n        const onlyOneShowingChild = this.onlyOneShowingChild(route.children, route)\n        if (route.children && onlyOneShowingChild  && !route.alwaysShow) {\n          route = onlyOneShowingChild\n        }\n        // console.log('route', route)\n        const data = {\n          path: path.resolve(basePath, route.path),\n          title: route.meta && route.meta.title,\n          id: route.id\n        }\n        // console.log('data', data)\n        // recursive child routes\n        if (route.children) {\n          data.children = this.generateRoutes(route.children, data.path)\n        }\n        res.push(data)\n      }\n      return res\n    },\n    generateArr(routes) {\n      let data = []\n      routes.forEach(route => {\n        data.push(route)\n        if (route.children) {\n          const temp = this.generateArr(route.children)\n          if (temp.length > 0) {\n            data = [...data, ...temp]\n          }\n        }\n      })\n      return data\n    },\n    handleAddRole() {\n      this.role = Object.assign({}, defaultRole)\n      if (this.$refs.tree) {\n        this.$refs.tree.setCheckedNodes([])\n      }\n      this.dialogType = 'new'\n      this.dialogVisible = true\n    },\n    handleEdit(scope) {\n      this.dialogType = 'edit'\n      this.dialogVisible = true\n      this.checkStrictly = true\n      this.role = deepClone(scope.row)\n      console.log('role', this.role)\n      this.$nextTick(() => {\n        //const routes = this.generateRoutes(this.role.routes == null ? [] : this.role.routes)\n        const d = this.generateArr(this.role.routes )\n        console.log('d', d)\n        console.log('routesData', this.routesData)   //这个有bug\n        this.$refs.tree.setCheckedNodes(d)\n        // set checked state of a node not affects its father and child nodes\n        this.checkStrictly = false\n      })\n    },\n    handleDelete({ $index, row }) {\n      this.$confirm('Confirm to remove the role?', 'Warning', {\n        confirmButtonText: 'Confirm',\n        cancelButtonText: 'Cancel',\n        type: 'warning'\n      })\n        .then(async() => {\n          await deleteRole(row.key)\n          this.rolesList.splice($index, 1)\n          this.$message({\n            type: 'success',\n            message: 'Delete succed!'\n          })\n        })\n        .catch(err => { console.error(err) })\n    },\n    generateTree(routes, basePath = '/', checkedKeys) {\n      const res = []\n\n      for (const route of routes) {\n        const routePath = path.resolve(basePath, route.path)\n\n        // recursive child routes\n        if (route.children) {\n          route.children = this.generateTree(route.children, routePath, checkedKeys)\n        }\n\n        if (checkedKeys.includes(routePath) || (route.children && route.children.length >= 1)) {\n          res.push(route)\n        }\n      }\n      return res\n    },\n    async confirmRole() {\n      const isEdit = this.dialogType === 'edit'\n\n      const checkedKeys = this.$refs.tree.getCheckedKeys()\n      this.role.routes = this.generateTree(deepClone(this.serviceRoutes), '/', checkedKeys)\n\n      if (isEdit) {\n        await updateRole(this.role)\n        //替换数据？\n        for (let index = 0; index < this.rolesList.length; index++) {\n          if (this.rolesList[index].key === this.role.key) {\n            this.rolesList.splice(index, 1, Object.assign({}, this.role))\n            break\n          }\n        }\n      } else {\n        const { data } = await addRole(this.role)\n        this.role.key = data.key\n        this.rolesList.push(this.role)\n      }\n\n      const { description, key, name } = this.role\n      this.dialogVisible = false\n      this.$notify({\n        title: 'Success',\n        dangerouslyUseHTMLString: true,\n        message: `\n            <div>Role Key: ${key}</div>\n            <div>Role Name: ${name}</div>\n            <div>Description: ${description}</div>\n          `,\n        type: 'success'\n      })\n    },\n    // reference: src/view/layout/components/Sidebar/SidebarItem.vue\n    onlyOneShowingChild(children = [], parent) {\n      let onlyOneChild = null\n      const showingChildren = children.filter(item => !item.hidden)\n\n      // When there is only one child route, the child route is displayed by default\n      if (showingChildren.length === 1) {\n        onlyOneChild = showingChildren[0]\n        onlyOneChild.path = path.resolve(parent.path, onlyOneChild.path)\n        return onlyOneChild\n      }\n\n      // Show parent if there are no child route to display\n      if (showingChildren.length === 0) {\n        onlyOneChild = { ... parent, path: '', noShowingChildren: true }\n        return onlyOneChild\n      }\n\n      return false\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.app-container {\n  .roles-table {\n    margin-top: 30px;\n  }\n  .permission-tree {\n    margin-bottom: 30px;\n  }\n}\n</style>\n"]}]}