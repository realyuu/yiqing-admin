{"remainingRequest":"/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!/Users/songyu/IdeaProjects/yiqing-admin-1/src/views/dashboard/admin/components/Graph.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/songyu/IdeaProjects/yiqing-admin-1/src/views/dashboard/admin/components/Graph.vue","mtime":1618551052428},{"path":"/Users/songyu/IdeaProjects/yiqing-admin-1/babel.config.js","mtime":1609384492193},{"path":"/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songyu/IdeaProjects/yiqing-admin-1/node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7Ci8vCi8vCi8vCi8vCmltcG9ydCAqIGFzIGVjaGFydHMgZnJvbSAiZWNoYXJ0cyI7CmltcG9ydCByZXNpemUgZnJvbSAnLi9taXhpbnMvcmVzaXplJzsKaW1wb3J0IHsgZ2V0RGFzaERhdGEsIGdldEdyYXBoRGF0YSB9IGZyb20gIkAvYXBpL2Rhc2giOwppbXBvcnQgeyByZWxhdGlvbkdyYXBoIH0gZnJvbSAiQC9hcGkvY2hhcnQiOwp2YXIgYW5pbWF0aW9uRHVyYXRpb24gPSA2MDAwOwpleHBvcnQgZGVmYXVsdCB7CiAgbWl4aW5zOiBbcmVzaXplXSwKICBwcm9wczogewogICAgY2xhc3NOYW1lOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2NoYXJ0JwogICAgfSwKICAgIHdpZHRoOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJzEwMCUnCiAgICB9LAogICAgaGVpZ2h0OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJzY1MHB4JwogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNoYXJ0OiBudWxsLAogICAgICBncmFwaDogbnVsbAogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgcmVsYXRpb25HcmFwaCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsKICAgICAgICBfdGhpcy5ncmFwaCA9IHJlcy5kYXRhOwoKICAgICAgICBfdGhpcy5pbml0Q2hhcnQoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIGlmICghdGhpcy5jaGFydCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy5jaGFydC5kaXNwb3NlKCk7CiAgICB0aGlzLmNoYXJ0ID0gbnVsbDsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXRDaGFydDogZnVuY3Rpb24gaW5pdENoYXJ0KCkgewogICAgICAvLyB0aGlzLmNoYXJ0ID0gZWNoYXJ0cy5pbml0KHRoaXMuJGVsLCAnbWFjYXJvbnMnKQogICAgICB0aGlzLmNoYXJ0ID0gZWNoYXJ0cy5pbml0KHRoaXMuJGVsLCAnZGFyaycpOwogICAgICB2YXIgZ3JhcGggPSB0aGlzLmdyYXBoOyAvLyBjb25zb2xlLmxvZyhncmFwaCkKCiAgICAgIHRoaXMuY2hhcnQuc2V0T3B0aW9uKHsKICAgICAgICB0aXRsZTogewogICAgICAgICAgdGV4dDogJ0lQ6LWE5Lqn5YWz57O75Zu+6LCxJywKICAgICAgICAgIHN1YnRleHQ6ICdEZWZhdWx0IGxheW91dCcsCiAgICAgICAgICB0b3A6ICdib3R0b20nLAogICAgICAgICAgbGVmdDogJ3JpZ2h0JwogICAgICAgIH0sCiAgICAgICAgdG9vbHRpcDoge30sCiAgICAgICAgZGFya01vZGU6IHRydWUsCiAgICAgICAgbGVnZW5kOiBbewogICAgICAgICAgLy8gc2VsZWN0ZWRNb2RlOiAnc2luZ2xlJywKICAgICAgICAgIGRhdGE6IGdyYXBoLmNhdGVnb3JpZXMubWFwKGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgIHJldHVybiBhLm5hbWU7CiAgICAgICAgICB9KQogICAgICAgIH1dLAogICAgICAgIGFuaW1hdGlvbkR1cmF0aW9uOiAzMDAwLAogICAgICAgIGFuaW1hdGlvbkVhc2luZ1VwZGF0ZTogJ3F1aW50aWNJbk91dCcsCiAgICAgICAgc2VyaWVzOiBbewogICAgICAgICAgbmFtZTogJ+S4reiNr+adkOWFs+ezu+WbvuiwsScsCiAgICAgICAgICB0eXBlOiAnZ3JhcGgnLAogICAgICAgICAgbGF5b3V0OiAnbm9uZScsCiAgICAgICAgICBkYXRhOiBncmFwaC5ub2RlcywKICAgICAgICAgIGxpbmtzOiBncmFwaC5saW5rcywKICAgICAgICAgIGNhdGVnb3JpZXM6IGdyYXBoLmNhdGVnb3JpZXMsCiAgICAgICAgICByb2FtOiB0cnVlLAogICAgICAgICAgbGFiZWw6IHsKICAgICAgICAgICAgcG9zaXRpb246ICdyaWdodCcsCiAgICAgICAgICAgIGZvcm1hdHRlcjogJ3tifScKICAgICAgICAgIH0sCiAgICAgICAgICBsaW5lU3R5bGU6IHsKICAgICAgICAgICAgY29sb3I6ICdzb3VyY2UnLAogICAgICAgICAgICBjdXJ2ZW5lc3M6IDAuMwogICAgICAgICAgfSwKICAgICAgICAgIGVtcGhhc2lzOiB7CiAgICAgICAgICAgIGZvY3VzOiAnYWRqYWNlbmN5JywKICAgICAgICAgICAgbGluZVN0eWxlOiB7CiAgICAgICAgICAgICAgd2lkdGg6IDEwCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9XQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;AAKA;AACA;AACA;AACA;AAEA;AAEA;AACAA,kBADA;AAEAC;AACAC;AACAC,kBADA;AAEAC;AAFA,KADA;AAKAC;AACAF,kBADA;AAEAC;AAFA,KALA;AASAE;AACAH,kBADA;AAEAC;AAFA;AATA,GAFA;AAgBAG,MAhBA,kBAgBA;AACA;AACAC,iBADA;AAEAC;AAFA;AAIA,GArBA;AAsBAC,SAtBA,qBAsBA;AAAA;;AACA;AACAC;AACAC;AACA;;AACA;AACA,OAJA,EAIAC,KAJA,CAIA;AACAD;AACA,OANA;AAOA,KARA;AASA,GAhCA;AAiCAE,eAjCA,2BAiCA;AACA;AACA;AACA;;AACA;AACA;AACA,GAvCA;AAwCAC;AACAC,aADA,uBACA;AACA;AACA;AAEA,6BAJA,CAKA;;AACA,2BACA;AACAC;AACAC,0BADA;AAEAC,mCAFA;AAGAC,uBAHA;AAIAC;AAJA,SADA;AAOAC,mBAPA;AAQAC,sBARA;AASAC;AACA;AACAjB;AACA;AACA,WAFA;AAFA,UATA;AAeAkB,+BAfA;AAgBAC,6CAhBA;AAiBAC,iBACA;AACAC,yBADA;AAEAzB,uBAFA;AAGA0B,wBAHA;AAIAtB,2BAJA;AAKAuB,4BALA;AAMAC,sCANA;AAOAC,oBAPA;AAQAC;AACAC,6BADA;AAEAC;AAFA,WARA;AAYAC;AACAC,2BADA;AAEAC;AAFA,WAZA;AAgBAC;AACAC,8BADA;AAEAJ;AACA/B;AADA;AAFA;AAhBA,SADA;AAjBA,OADA;AA6CA;AApDA;AAxCA","names":["mixins","props","className","type","default","width","height","data","chart","graph","mounted","relationGraph","console","catch","beforeDestroy","methods","initChart","title","text","subtext","top","left","tooltip","darkMode","legend","animationDuration","animationEasingUpdate","series","name","layout","links","categories","roam","label","position","formatter","lineStyle","color","curveness","emphasis","focus"],"sourceRoot":"src/views/dashboard/admin/components","sources":["Graph.vue"],"sourcesContent":["<template>\n  <div :class=\"className\" :style=\"{height:height,width:width}\" />\n</template>\n\n<script>\nimport  * as echarts from \"echarts\"\nimport resize from './mixins/resize'\nimport {getDashData, getGraphData} from \"@/api/dash\";\nimport {relationGraph} from \"@/api/chart\";\n\nconst animationDuration = 6000\n\nexport default {\n  mixins: [resize],\n  props: {\n    className: {\n      type: String,\n      default: 'chart'\n    },\n    width: {\n      type: String,\n      default: '100%'\n    },\n    height: {\n      type: String,\n      default: '650px'\n    }\n  },\n  data() {\n    return {\n      chart: null,\n      graph: null\n    }\n  },\n  mounted() {\n    this.$nextTick(() => {\n      relationGraph().then(res=>{\n        console.log(res.data)\n        this.graph = res.data\n        this.initChart()\n      }).catch(error=>{\n        console.log(error)\n      })\n    })\n  },\n  beforeDestroy() {\n    if (!this.chart) {\n      return\n    }\n    this.chart.dispose()\n    this.chart = null\n  },\n  methods: {\n    initChart() {\n      // this.chart = echarts.init(this.$el, 'macarons')\n      this.chart = echarts.init(this.$el,'dark')\n\n      let graph = this.graph;\n      // console.log(graph)\n      this.chart.setOption(\n         {\n          title: {\n            text: 'IP资产关系图谱',\n            subtext: 'Default layout',\n            top: 'bottom',\n            left: 'right'\n          },\n          tooltip: {},\n          darkMode: true,\n          legend: [{\n            // selectedMode: 'single',\n            data: graph.categories.map(function (a) {\n              return a.name;\n            })\n          }],\n          animationDuration: 3000,\n          animationEasingUpdate: 'quinticInOut',\n          series: [\n            {\n              name: '中药材关系图谱',\n              type: 'graph',\n              layout: 'none',\n              data: graph.nodes,\n              links: graph.links,\n              categories: graph.categories,\n              roam: true,\n              label: {\n                position: 'right',\n                formatter: '{b}'\n              },\n              lineStyle: {\n                color: 'source',\n                curveness: 0.3\n              },\n              emphasis: {\n                focus: 'adjacency',\n                lineStyle: {\n                  width: 10\n                }\n              }\n            }\n          ]\n        }\n      )\n    }\n  }\n}\n</script>\n"]}]}